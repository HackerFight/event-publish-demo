# 使用Spring的事件发布-订阅模式来优化代码结构

## 1. 背景说明
项目中需要引入阿里云的MNS消息服务(轻量级的消息中间件), 它这个不像RocketMQ有完整的整合案例，也没有基于注解方便用户使用的方式，用户只能根据官网提供的案例，创建MNSClient 来完成发布订阅，我们是消费者，需要一直监听队列中是否有消息，如果有消息，则消费，没有消息则要阻塞直到消息进来。为此我基于spring的事件发布-订阅机制，重构了代码。

这个重构最大的好处就是如果有其他人想消费，只需要实现`MessageHandler`接口即可，实现这个接口还可以消费所有队列的数据，还可以消费指定队列的数据。


## 2. 使用方式
直接实现 `MessageHandler` 接口即可，他的match方法可以用来制定消费特定的队列数据，默认是消费所有队列的数据。这里的所有队列指的是项目中配置的队列，在`MnsProperties`类中。